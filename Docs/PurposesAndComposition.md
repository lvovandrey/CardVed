В данном документе будут изложены цели и состав разрабатываемого программного комплекса (Системы).

# Наименование
Рабочее наименование продукта - CardVed

# Цель работы
Создание системы для автоматизации управления и работы с обучающими материалами на основе карточек с изображениями.

# Термины и определения

**Карточка или Электронная карточка** - программный объект, представляющий собой примерный аналог бумажной карточки с рисунком. К Карточке также могут быть привязаны разнообразные сопутствующие данные (напр., текст с названием изображенного объекта, медиафайл со звуковым совпровождением при предъявлении карточки и т.п.). Изображение на карточке может быть как статичным, так и видеоизображением. Цель предъявления Карточки - восприятие Обучающимся информации, которая привязана к карточки (информации об объекте, его характеристиках, соотношениях с объектами на других Карточках, названии и т.п.) 

**Обучающие материалы** - комплекты карточек, правила и алгоритмы их предъявления (демонстрации), дополнительные сопровождающие инструкции и мультимедиа данные. В обучающие материалы входят также такие объекты как Сценарии, Группы сценариев (возможно, отдельные Сцены или правила их автоматического формирования).

**Хранилище** - компонент системы (база данных), обеспечивающий хранение Карточек и обучающих материалов.

**Обучающийся** - человек, которому предъявляются Обучающие материалы для улучшения его вербальных и когнитивных навыков.

**Преподаватель** - человек, использующий систему для формирования комплектов Обучающих материалов и организующий их предъявление Обучающемуся.<br>  *Прим.: Данная роль может быть разделена на 2 роли - изготовителя Обучающих материалов и непосредственно Преподавателя*

**Пользователь** - роль Преподавателя, использующего Систему. Имеет права на создание и использование Обучающих материалов и Карточек.

**Администратор** - роль, отвечающая за управление Пользователями, выдачей им прав на использование системы, модерацию данных, находящихся в Хранилище, администрирование Хранилища. Также обеспечивает функциональную работоспособность системы.

**Разработчик** - человек, разрабатывающий систему.

**Правила предъявления** - правила по которым Обучающемуся предъявляются Карточки. Также это понятие включает в себя правила оперирования Обучающегося карточками, правила определения верного и неверного ответа, размещение карточек в визуальном поле, их групповое, парное, одиночное или другое размещение, правила озвучивания задачи и карточки.

**Задача / Учебная задача (Education task)** - задание для обучающегося, которое он должен попытаться выполнить при одном предъявлении Карточки (Карточек). Например, выбрать из нескольких карточек одну, название которой ему озвучено. Либо переместить карточку в определенную точку экрана. 

**Сцена (Scene)** - в рамках Сцены осуществляется визуальный показ Карточки (Карточек) и операции, производимые как системой (например, озвучка целевой карточки) так и Обучающимся (например, клик мышкой на карточке). Каждая Сцена является реализацией одной Учебной задачи. (Учебная задача - принадлежность сцены).

**Сценарий (Scenario)** - Группа Сцен, объединенная общим набором карточек. В рамках Сценария, содержащиеся в нем сцены предъявляются последовательно (по очереди). Пример: в рамка Сценария на каждой Сцене Обучающемуся дается Задача выбрать (кликнуть) Карточку, которую система озвучивает в рамках данной сцены. Сцены повторяются до тех пор пока Обучающий не выберет правильно каждую Карточку (или пока не выберет правильно Каждую карточку несколько раз, или просто Сцены случайным образом предъявляются заданное преподавателем вручную или автоматически число раз).
Возможен вариант, когда сценарий состоит из одной сцены. Пример: Сценарий "Где фрукты, а где овощи. Перетащи фрукты в левую корзинку, а овощи - в правую". Обучающемуся в рамках Сцены предъявляется одновременно целый набор Карточек, которые нужно рассортировать по категориям. Категории визуально оформлены как области экрана с соответстующим изображением и текстом. Задача Обучающегося - перетащить каждую карточку из набора в область Категории. В этом случае сцена будет одна. 
Однако, если в рамках Сцены пользователю предъявляется часть набора Карточек (или вообще одна карточка), то Сценарий должен составляться из нескольких Сцен. На каждой будет предъявляться набор Карточек (одна Карточка), и Обучающемуся будет каждый раз повторяться инструкция.

**Порядок сцен (Scenes order)** - одна из составляющих Правил предъявления. Сцены могут предъявляться в зависимости от результатов решения в различной последовательности. Сцены могут предъявляться в случайном порядке, заранее определенном порядке, либо их предъявление может быть связано с результатами решения Задач поставленных в рамках предыдущих сцен.

**Правила формирования Сцены** - одна из составляющих Правил предъявления. Сцены в общем случае генерируются автоматически в runtime. Однако правила их формирования может задавать Пользователь. Например, для задачи парных Карточек (типа "Много-одно" или подобных) должны выводиться в одной Сцене только 2 карточки связанные друг с другом ("Много яблок - одно яблоко"). При этом в Сценарии может присутствовать множество пар карточек, которые выводятся только вместе в рамках одной Сцены. Связывание карточек может производиться с помощью специальных дополнительных тегов или других инструментов.

**Группа сценариев (Scenario group)** - Несколько сценариев, объединенных вместе. Все сценарии группы должны обладать одинаковыми Правилами предъявления

# Назначение системы
Конечным назначением системы является обучение лингвистическим и когнитивным навыкам с помощью автоматизированного предъявления Карточек в форме Обучающих материалов.

# Задачи
- создание, хранение и управление Карточками в Хранилище
- создание, хранение и управление Обучающих материалов в Хранилище
- создание Пользователей и Администраторов, управление их правами, авторизация и аутентификация
- визуальное и аудио предъявление Обучающемуся Обучающих материалов
- регистрация действий и взаимодействие с Обучающим при предъявлении ему Обучающих материалов (например, при нажатии на Карточку система должна сообщить Обучающемуся верным или не верным был его выбор Карточки)
  
# Компоненты
Основные функциональные компоненты:
- система управления объектами в Хранилище
- система администрирования
- система предъявления Обучающих материалов
- ядро системы
- базы данных Хранилища
- базы данных Пользователей

## Запускаемые приложения/сервисы
Основные клиентские приложения
- UI Пользователя (управления объектами в Хранилище)
- UI Администратора 
- UI Обучающегося
- UI дополнительных упражнений (Подготовка Обучающегося к использованию системы)
  
Сервисы слоя IA:
- Card.RepoApi - API для доступа к данным Хранилища (gRPC)
- Card.UsersApi - API для доступа к данным о Пользователях (gRPC)
- Card.RepoRESTApi - отдельное API для сторонних приложений ( WebAPI ограниченная версия RepoApi для других разработчиков)
- Card.TTSApi - API / фасад для генерации озвучки (gRPC)
- Card.StatisticApi - API для сбора статистики (gRPC)

Внешние сервисы (вне приложения)
- Card.Identity - сервис идентификации 
- Nginx
  
- Card.TTS - Сервис синтезирования речи  (RabbitMQ, взаимодействие через очередь сообщений)  __предварительно на основе RHVoice или https://github.com/denisxab/speakerpy     с этим вопрос пока - можно вообще на фронте в JS в 2 строки решить? Но это будет стороннее решение. А хотелось бы свое__

## Основные слои Backend
Слой Core (Enterprise Buisnes Rules): 
- Core Domain (сущности)
- Core Common (библиотека общих компонентов/инструментов)

Слой App (UseCases):
- Application (слой сценариев, бизнес-правил приложения)

Слой (IA) Interface adapters:
- Infrastructure (слой взаимодействия с БД)
- Presentation (доступ к данным для клиентов: API для клиентских приложений)


